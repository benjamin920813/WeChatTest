{
  "appid": "sh5608f9adb0db1",
  "appsecret": "6c871a107b6432c554beb585191d2e09",
  "name": "gujiMall",
  "appserv": "http://api.zpage.me",
  "appserv_dev": "http://dev.api.zpage.me",
  "cookieid": "SHSESSIONID",
  "port": 5000,
  "appjs": "dmFyIGtvYSA9IHJlcXVpcmUoJ2tvYScpOwp2YXIgZnMgPSByZXF1aXJlKCdmcycpOwp2YXIgcmVzb2x2ZSA9IHJlcXVpcmUoJ3BhdGgnKS5yZXNvbHZlOwp2YXIgcm91dGVyID0gcmVxdWlyZSgna29hLXJvdXRlcicpKCk7CnZhciBtb3VudCA9IHJlcXVpcmUoJ2tvYS1tb3VudCcpOwp2YXIgcGhwanMgPSByZXF1aXJlKCdwaHBqcycpOwp2YXIgc2hhMSA9IHJlcXVpcmUoJ3NoYTEnKTsKdmFyIGJvZHlQYXJzZXIgPSByZXF1aXJlKCdrb2EtYm9keXBhcnNlcicpOwp2YXIgand0ID0gcmVxdWlyZSgnand0LXNpbXBsZScpOwp2YXIgYXBwID0ga29hKCk7CnZhciBjb25maWcgPSByZXF1aXJlKCcuLy5zaG9vdHMuanNvbicpOwp2YXIgc2VuZCA9IHJlcXVpcmUoJ2tvYS1zZW5kJyk7CnZhciBzaG9vdENvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJyk7CnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpOwp2YXIgcGFnZVJ1bGUgPSBuZXcgTWFwKCk7CnZhciByZXF1ZXN0ID0gcmVxdWlyZSgnY28tcmVxdWVzdCcpOwp2YXIgY28gPSByZXF1aXJlKCdjbycpOwp2YXIgQ3JvbkpvYiA9IHJlcXVpcmUoJ2Nyb24nKS5Dcm9uSm9iOwp2YXIgZWpzID0gcmVxdWlyZSgnY28tZWpzJyk7CmVqcy5vcGVuID0gJzw/anMnOwplanMuY2xvc2UgPSAnPz4nOwoKYXBwLnVzZShib2R5UGFyc2VyKHsKICBmb3JtTGltaXQ6ICcyMG1iJywKICBqc29uTGltaXQ6ICcxMG1iJwp9KSk7CmFwcC51c2Uocm91dGVyLnJvdXRlcygpKS51c2Uocm91dGVyLmFsbG93ZWRNZXRob2RzKCkpOwphcHAudXNlKHJlcXVpcmUoJ2tvYS12YWxpZGF0ZScpKCkpOwoKdmFyIGNvbnRleHQgPSBudWxsOwoKdmFyIHNlcnYgPSBmdW5jdGlvbioocGF0aCwgcGFyYW1zLCB0eXBlKSB7CiAgdHlwZSA9ICh0eXBlICYmIHR5cGUudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpID8gJ1BPU1QnIDogJ0dFVCc7CiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9OwogIHZhciB1cmwgPSAnaHR0cDovLzEyNy4wLjAuMTonICsgY29uZmlnLnBvcnQgKyAnL3NlcnYvJyArIHBhdGg7CiAgY29uc29sZS5sb2codXJsKTsKICB2YXIgY29va2llID0gY29udGV4dC5oZWFkZXJzLmNvb2tpZSB8fCAnJzsKICB2YXIgb3B0aW9uID0gewogICAgdXJpOiB1cmwKICB9OwogIGlmIChjb29raWUpIHsKICAgIHZhciBqID0gcmVxdWVzdC5qYXIoKTsKICAgIGouc2V0Q29va2llKGNvb2tpZSwgdXJsKTsKICAgIG9wdGlvbi5qYXIgPSBqOwogIH0KCiAgdHJ5IHsKICAgIGlmICh0eXBlID09ICdHRVQnKSB7CiAgICAgIG9wdGlvbi5xcyA9IHBhcmFtczsKICAgICAgdmFyIHJldCA9IHlpZWxkIHJlcXVlc3Qob3B0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG9wdGlvbi5tZXRob2QgPSAnUE9TVCc7CiAgICAgIG9wdGlvbi5mb3JtID0gcGFyYW1zOwogICAgICB2YXIgcmV0ID0geWllbGQgcmVxdWVzdChvcHRpb24pOwogICAgfQogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiAnbmV0d29yayBlcnJvcic7CiAgfQogIHJldHVybiByZXQuYm9keTsKfQoKdmFyIGVudiA9IHsKICBwcmQ6IHByb2Nlc3MuZW52LlBSRCA9PT0gJ3RydWUnIHx8IGZhbHNlLAogIHBvc3RmaXg6IHByb2Nlc3MuZW52LlBSRCA9PT0gJ3RydWUnID8gJycgOiAnX2RldicKfTsKCnZhciBhcHBPcHRpb25zID0gY29uZmlnOwphcHBPcHRpb25zLmlkID0gY29uZmlnLmFwcGlkOwphcHBPcHRpb25zLnNlY3JldCA9IGNvbmZpZy5hcHBzZWNyZXQ7CmFwcE9wdGlvbnMuc2VydmVyID0gY29uZmlnWyJhcHBzZXJ2IiArIGVudi5wb3N0Zml4XTsKCgppZiAoc2hvb3RDb25maWcgJiYgc2hvb3RDb25maWcucGFnZSkgewogIHNob290Q29uZmlnLnBhZ2UuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpKSB7CiAgICBpZiAoaXRlbSAmJiBpdGVtLnVybCkgewogICAgICBpdGVtLnVybC5mb3JFYWNoKGZ1bmN0aW9uKHBhZ2UsIGkpIHsKICAgICAgICB2YXIgcnVsZSA9IHt9OwogICAgICAgIGZvciAodmFyIG8gaW4gaXRlbSkgewogICAgICAgICAgaWYgKHR5cGVvZihpdGVtW29dKSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHJ1bGVbb10gPSBpdGVtW29dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocnVsZS5hbGxvdyB8fCBydWxlLmRlbnkpIHsKICAgICAgICAgIHBhZ2VSdWxlLnNldChwYWdlLCBydWxlKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSkKfQoKYXBwLnVzZShmdW5jdGlvbioobmV4dCkgewogIHRoaXMuZW52ID0gZW52OwogIHlpZWxkIG5leHQ7Cn0pOwoKYXBwLnVzZShyZXF1aXJlKCdzaG9vdHMtdG9vbGtpdCcpKGFwcE9wdGlvbnMsIHNob290Q29uZmlnKSk7CgphcHAudXNlKG1vdW50KCcvaW5uZXJhcGknLCBmdW5jdGlvbiooKSB7CiAgaWYgKHRoaXMucmVxdWVzdC5tZXRob2QgPT0gJ1BPU1QnKSB7CiAgICB2YXIgbWV0aG9kID0gdGhpcy5yZXF1ZXN0LmJvZHkubWV0aG9kOwogICAgdmFyIGZ1bmMgPSB0aGlzLnJlcXVlc3QuYm9keS5mdW5jOwogICAgdmFyIHBhcmFtcyA9IHRoaXMucmVxdWVzdC5ib2R5LnBhcmFtczsKICAgIHZhciBzaG9vdHMgPSB0aGlzLnNob290czsKICAgIHN3aXRjaCAobWV0aG9kKSB7CiAgICAgIGNhc2UgJ2ZsYXNoJzoKICAgICAgICB2YXIga2V5ID0gdGhpcy5yZXF1ZXN0LmJvZHkucGFyYW1zLmtleTsKICAgICAgICBzd2l0Y2ggKGZ1bmMpIHsKICAgICAgICAgIGNhc2UgJ2dldCc6CiAgICAgICAgICAgIHRoaXMuYm9keSA9IHlpZWxkIHRoaXMuc2hvb3RzLmZsYXNoLmdldChrZXkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3NldCc6CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMucmVxdWVzdC5ib2R5LnBhcmFtcy52YWx1ZTsKICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuZmxhc2guc2V0KGtleSwgdmFsdWUpOwogICAgICAgICAgICBicmVhawogICAgICAgICAgY2FzZSAnaGFzJzoKICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuZmxhc2guaGFzKGtleSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhpcy50aHJvdygnbm90IHN1cHBvcnQgJyArIG1ldGhvZCArICc6JyArIGZ1bmMsIDUwMyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBicmVhawogICAgICBjYXNlICdzZXNzaW9uJzoKICAgICAgICB2YXIgbmFtZSA9IHRoaXMucmVxdWVzdC5ib2R5LnBhcmFtcy5uYW1lOwogICAgICAgIHN3aXRjaCAoZnVuYykgewogICAgICAgICAgY2FzZSAnZ2V0JzoKICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuc2Vzc2lvbi5nZXQobmFtZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnc2V0JzoKICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZXF1ZXN0LmJvZHkucGFyYW1zLnZhbHVlOwogICAgICAgICAgICBpZiAobmFtZSA9PSAndXNlcicpIHsKICAgICAgICAgICAgICB0aGlzLnRocm93KCd1c2VyIHNlc3Npb24gY2FuIG5vdCBzZXQgYnkgdGhlIHdlYiBzZGsnLCA0MDMpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuc2Vzc2lvbi5zZXQobmFtZSwgdmFsdWUpOwogICAgICAgICAgICBicmVhawogICAgICAgICAgY2FzZSAncmVtb3ZlJzoKICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZXF1ZXN0LmJvZHkucGFyYW1zLnZhbHVlOwogICAgICAgICAgICBpZiAobmFtZSA9PSAndXNlcicpIHsKICAgICAgICAgICAgICB0aGlzLnRocm93KCd1c2VyIHNlc3Npb24gY2FuIG5vdCByZW1vdmUgYnkgdGhlIHdlYiBzZGsnLCA0MDMpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuc2Vzc2lvbi5yZW1vdmUobmFtZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhpcy50aHJvdygnbm90IHN1cHBvcnQgJyArIG1ldGhvZCArICc6JyArIGZ1bmMsIDUwMyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY2FjaGUnOgogICAgICAgIHZhciBrZXkgPSB0aGlzLnJlcXVlc3QuYm9keS5wYXJhbXMua2V5OwogICAgICAgIHN3aXRjaCAoZnVuYykgewogICAgICAgICAgY2FzZSAnZ2V0JzoKICAgICAgICAgICAgdGhpcy5ib2R5ID0geWllbGQgdGhpcy5zaG9vdHMuY2FjaGUuZ2V0KGtleSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnc2V0JzoKICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZXF1ZXN0LmJvZHkucGFyYW1zLnZhbHVlOwogICAgICAgICAgICB2YXIgZXhwaXJlU2Vjb25kcyA9IHRoaXMucmVxdWVzdC5ib2R5LnBhcmFtcy5leHBpcmVTZWNvbmRzOwogICAgICAgICAgICB0aGlzLmJvZHkgPSB5aWVsZCB0aGlzLnNob290cy5jYWNoZS5zZXQoa2V5LCB2YWx1ZSwgZXhwaXJlU2Vjb25kcyk7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlICdyZW1vdmUnOgogICAgICAgICAgICB0aGlzLmJvZHkgPSB5aWVsZCB0aGlzLnNob290cy5jYWNoZS5yZW1vdmUoa2V5KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aGlzLnRocm93KCdub3Qgc3VwcG9ydCAnICsgbWV0aG9kICsgJzonICsgZnVuYywgNTAzKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGJyZWFrCiAgICAgIGNhc2UgJ3F1ZXVlJzoKICAgICAgICBzd2l0Y2ggKGZ1bmMpIHsKICAgICAgICAgIGNhc2UgJ2VucXVldWUnOgogICAgICAgICAgICB0aGlzLmJvZHkgPSB5aWVsZCB0aGlzLnNob290cy5xdWV1ZS5lbnF1ZXVlKHBhcmFtcyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhpcy50aHJvdygnbm90IHN1cHBvcnQgJyArIG1ldGhvZCArICc6JyArIGZ1bmMsIDUwMyk7CiAgICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIHRoaXMudGhyb3coJ25vdCBzdXBwb3J0JyArIG1ldGhvZCwgNTAzKQogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLmJvZHkgPSAnaXQgaXMgd29ya2VkJzsKICB9Cn0pKTsKCgovLyBtYXRjaCBzZXJ2IGFwaXMKKGZ1bmN0aW9uKCkgewogIHZhciBhcGlzID0gZnMucmVhZGRpclN5bmMoJ3NlcnYnKTsKICBmb3IgKHZhciBqIGluIGFwaXMpIHsKICAgIGlmICghYXBpc1tqXS5tYXRjaCgvXC5qcyQvKSkgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIHZhciBmaWxlID0gYXBpc1tqXS5yZXBsYWNlKC9cLmpzJC8sICcnKTsKICAgIGFwcC51c2UobW91bnQoJy9zZXJ2LycgKyBmaWxlLCByZXF1aXJlKCcuL3NlcnYvJyArIGZpbGUpLm1pZGRsZXdhcmUoKSkpOwogIH0KfSkoKTsKCihmdW5jdGlvbigpIHsKICBpZiAoIWZzLmV4aXN0c1N5bmMoJ3NlcnYvcmVzdGFwaScpKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBhcGlzID0gZnMucmVhZGRpclN5bmMoJ3NlcnYvcmVzdGFwaScpOwogIGZvciAodmFyIGogaW4gYXBpcykgewogICAgaWYgKCFhcGlzW2pdLm1hdGNoKC9cLmpzJC8pKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgdmFyIGZpbGUgPSBhcGlzW2pdLnJlcGxhY2UoL1wuanMkLywgJycpOwogICAgYXBwLnVzZShtb3VudCgnLycgKyBmaWxlLCByZXF1aXJlKCcuL3NlcnYvcmVzdGFwaS8nICsgZmlsZSkubWlkZGxld2FyZSgpKSk7CiAgfQp9KSgpOwoKCi8vIG1hdGNoIG90aGVyIGZpbGVzCmFwcC51c2UobW91bnQoJy8nLCBmdW5jdGlvbiooKSB7CiAgY29udGV4dCA9IHRoaXM7CiAgdmFyIG9wdHMgPSB7fTsKICBvcHRzLnJvb3QgPSByZXNvbHZlKCcuJyk7CiAgb3B0cy5pbmRleCA9IG9wdHMuaW5kZXggfHwgJ2luZGV4Lmh0bWwnOwogIHRoaXMucGF0aCA9ICh0aGlzLnBhdGggIT0gJy8nKSA/IHRoaXMucGF0aCA6ICcvaW5kZXguaHRtbCc7CiAgaWYgKCFmcy5leGlzdHNTeW5jKCIuIiArIHRoaXMucGF0aCkpIHsKICAgIHJldHVybjsKICB9CgogIGlmICh0aGlzLnBhdGgubWF0Y2goL1wuaHRtbCQvKSkgewogICAgdmFyIHNlc3Npb25JZCA9IHlpZWxkIHRoaXMuc2hvb3RzLnNlc3Npb24uZ2V0SWQoKTsKICAgIHZhciBpc0F1dGhlZCA9IGZhbHNlOwogICAgdmFyIHVzZXI7CiAgICBpZiAoc2Vzc2lvbklkICYmIHNlc3Npb25JZCAhPSAndW5kZWZpbmVkJykgewogICAgICB1c2VyID0geWllbGQgdGhpcy5zaG9vdHMuc2Vzc2lvbi5nZXQoJ3VzZXInKTsKICAgICAgY29uc29sZS5sb2coJ3Nlc3Npb24gdXNlcj0nKTsKICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgaWYgKHVzZXIudXNlcnJvbGUgJiYgdXNlci51c2Vycm9sZSAhPSAnZ3Vlc3QnKSB7CiAgICAgICAgICBpc0F1dGhlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHNlc3Npb25JZCA9IG51bGw7CiAgICAgICAgY29uc29sZS5sb2coJ3RoZSBzZXNzaW9uIHdhcyBleHBpcmVkJyk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgYXV0b0F1dGhCeVdlY2hhdCA9IHRoaXMuc2hvb3RzLmNvbmZpZyAmJiB0aGlzLnNob290cy5jb25maWcuYXV0b0F1dGhCeVdlY2hhdCB8fCBmYWxzZTs7CiAgICB2YXIgYXV0aFVybCA9IHRoaXMuc2hvb3RzLmNvbmZpZyAmJiB0aGlzLnNob290cy5jb25maWcuYXV0aFVybDsKICAgIGlmICghaXNBdXRoZWQpIHsKICAgICAgaWYgKGF1dG9BdXRoQnlXZWNoYXQpIHsKICAgICAgICAvL1RPRE8g6Ieq5Yqo6I635Y+W55So5oi355qEb3Blbmlk77yM5q2j5bi45pi+56S65omA6K+35rGC6aG16Z2iCiAgICAgICAgb3BlbklkID0gJ0kgYW0gdGhlIG1wIG9wZW4gaWQgJzsgLy/lgYforr7lpoLmraQKCiAgICAgICAgdXNlciA9IHsKICAgICAgICAgIHVzZXJyb2xlOiAndXNlcicsCiAgICAgICAgICB1c2VyaWQ6IG9wZW5JZAogICAgICAgIH07CiAgICAgICAgc2Vzc2lvbklkID0gJ3RoZSBuZXcgc2Vzc2lvbiBpZCc7CiAgICAgICAgaXNBdXRoZWQgPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgaWYgKCFzZXNzaW9uSWQgJiYgIXVzZXIpIHsKICAgICAgdXNlciA9IHsKICAgICAgICB1c2VybmFtZTogJ2d1ZXN0JywKICAgICAgICB1c2Vycm9sZTogJ2d1ZXN0JywKICAgICAgICB1c2VyaWQ6IHBocGpzLnVuaXFpZCgpCiAgICAgIH0KICAgICAgdmFyIHBsYXlsb2FkID0gYXBwT3B0aW9uczsKICAgICAgcGxheWxvYWQucm9sZSA9IHVzZXIudXNlcnJvbGU7CiAgICAgIHBsYXlsb2FkLnVzZXJpZCA9IHVzZXIudXNlcmlkOwogICAgICB2YXIgc2V0T2sgPSB5aWVsZCB0aGlzLnNob290cy5zZXNzaW9uLnNldCgndXNlcicsIHVzZXIsIDcgKiAyNCAqIDM2MDApOwogICAgICBjb25zb2xlLmxvZygnc2V0IGd1ZXN0IHNlc3Npb24gJyArIChzZXRPayA9PT0gdHJ1ZSA/ICdvaycgOiAnZmFpbCcpKTsKICAgIH0KCgogICAgdmFyIHJ1bGUgPSBwYWdlUnVsZS5nZXQodGhpcy5wYXRoKSB8fCBwYWdlUnVsZS5nZXQoJyonKTsKICAgIHZhciBmbGFnID0gdHJ1ZTsKICAgIGlmIChydWxlKSB7CiAgICAgIGlmIChydWxlLmFsbG93KSB7CiAgICAgICAgZmxhZyA9IHJ1bGUuYWxsb3cuY2FsbChudWxsLCB1c2VyLnVzZXJyb2xlLCB1c2VyLnVzZXJpZCk7CiAgICAgIH0KICAgICAgaWYgKHJ1bGUuZGVueSkgewogICAgICAgIGZsYWcgPSBmbGFnICYmICFydWxlLmRlbnkuY2FsbChudWxsLCB1c2VyLnVzZXJyb2xlLCB1c2VyLnVzZXJpZCk7CiAgICAgIH0KICAgIH0KICAgIGNvbnNvbGUubG9nKCdwYXRoPScgKyB0aGlzLnBhdGgpOwogICAgY29uc29sZS5sb2coJ3VzZXInKTsKICAgIGNvbnNvbGUubG9nKHVzZXIpOwogICAgY29uc29sZS5sb2coJ2lzQXV0aGVkPScgKyBpc0F1dGhlZCk7CiAgICBjb25zb2xlLmxvZygnYXV0aFVybD0nICsgYXV0aFVybCk7CiAgICBjb25zb2xlLmxvZygnY2hlY2sgcGFnZSBmbGFnPScgKyBmbGFnKQogICAgaWYgKCFmbGFnKSB7CiAgICAgIC8vIHBhZ2VSdWxlIOinhOWImemqjOivgeWksei0pe+8jOe7p+e7reWIsOeZu+mZhumhtemdogogICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdChhdXRoVXJsICsgJz9yZXR1cm49JyArIHRoaXMucmVxdWVzdC51cmwpOwogICAgfQoKICAgIHZhciB0cyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgdmFyIGh0bWwgPSBmcy5yZWFkRmlsZVN5bmMoIi4iICsgdGhpcy5wYXRoKTsKICAgIHZhciBzY3JpcHQgPSAiPHNjcmlwdD52YXIgU0hPT1RTX1NFUlZFUj0nIiArIGNvbmZpZ1snYXBwc2VydicgKyB0aGlzLmVudi5wb3N0Zml4XSArICInOyB2YXIgU0hPT1RTX1NJRD0nIiArIHNlc3Npb25JZCArICInOzwvc2NyaXB0PiI7CiAgICBodG1sID0gaHRtbC50b1N0cmluZygpLnJlcGxhY2UoLyg8XC9oZWFkPikvaSwgc2NyaXB0ICsgIiAkMSIpCiAgICAgIC8vY29uc29sZS5sb2coaHRtbCk7CiAgICB0aGlzLmJvZHkgPSB5aWVsZCBlanMucmVuZGVyKGh0bWwsIHsKICAgICAgbG9jYWxzOiB7CiAgICAgICAgc2Vydjogc2VydiwKICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LAogICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LAogICAgICAgIHVzZXI6IHVzZXIKICAgICAgfSwKICAgICAgZmlsZW5hbWU6IHRoaXMucGF0aAogICAgfSk7CgogICAgdGhpcy5zZXQoewogICAgICAnUDNQJzogJ3BvbGljeXJlZj0iL3czYy9wM3AueG1sIixDUD0iSURDIERTUCBDT1IgSVZBaSBJVkRpIE9VUiBUU1QiJywKICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsCiAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sOyBjaGFyc2V0PVVURi04JywKICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogbmV3IEJ1ZmZlcih0aGlzLmJvZHkpLmxlbmd0aCwKICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnCiAgICB9KTsKICAgIHJldHVybjsKICB9CgogIHlpZWxkIHNlbmQodGhpcywgdGhpcy5wYXRoLCBvcHRzKTsKfSkpOwoKYXBwLmxpc3Rlbihjb25maWcucG9ydCk7CmNvbnNvbGUubG9nKCdodHRwOi8vMTI3LjAuMC4xOicgKyBjb25maWcucG9ydCk7CgovLyDmiafooYxKb2Ig5py65Yi2CnZhciBjcm9uID0gcmVxdWlyZSgnLi9jcm9uJyk7CihmdW5jdGlvbigpIHsKICB2YXIgY29sbGVjdGlvbiA9IHJlcXVpcmUoJ3Nob290cy1tb25nbycpKGFwcE9wdGlvbnMpLmNvbGxlY3Rpb247CiAgdmFyIHF1ZXVlID0gcmVxdWlyZSgnc2hvb3RzLXF1ZXVlJykoYXBwT3B0aW9ucyk7CiAgZm9yICh2YXIgaSBpbiBjcm9uLnByb3RvdHlwZSkgewogICAgdmFyIGpvYiA9IGNyb24ucHJvdG90eXBlW2ldOwogICAgY29uc29sZS5sb2coam9iKTsKICAgIG5ldyBDcm9uSm9iKGpvYi5jcm9uVGltZSwgZnVuY3Rpb24oKSB7CiAgICAgIGNvKGZ1bmN0aW9uKigpIHsKICAgICAgICB0aGlzLnNob290cyA9IHt9OwogICAgICAgIHRoaXMuc2hvb3RzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uOwogICAgICAgIHRoaXMuc2hvb3RzLnF1ZXVlID0gcXVldWU7CiAgICAgICAgeWllbGQgKiBqb2Iub25UaWNrLmNhbGwodGhpcyk7CiAgICAgIH0pOwogICAgfSwgam9iLm9uQ29tcGxldGUsIGpvYi5zdGFydCwgam9iLnRpbWVab25lKTsKICB9Cn0pKCk7"
}